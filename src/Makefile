APPLICATION = smart_irrigation

BOARD ?= b-l072z-lrwan1

RIOTBASE ?= $(CURDIR)/../..


LORA_DRIVER ?= sx1276
LORA_REGION ?= EU868
USEPKG += semtech-loramac
USEMODULE += $(LORA_DRIVER)
USEMODULE += semtech_loramac_rx
USEMODULE += auto_init_loramac

USEMODULE += shell
USEMODULE += shell_commands
USEMODULE += fmt

USEMODULE += periph_gpio
USEMODULE += xtimer
USEMODULE += periph_gpio_irq

FEATURES_OPTIONAL += periph_eeprom
FEATURES_REQUIRED = periph_gpio


USEMODULE += ztimer
USEMODULE += ztimer_usec
USEPKG += u8g2

TEST_OUTPUT ?= 4

TEST_I2C ?= 0
TEST_SPI ?= 0
TEST_ADDR ?= 0x3c
TEST_PIN_CS ?= GPIO_UNDEF
TEST_PIN_DC ?= GPIO_UNDEF
TEST_PIN_RESET ?= GPIO_UNDEF

TEST_DISPLAY ?= u8g2_Setup_sh1106_i2c_128x64_noname_2

USEMODULE += periph_i2c
FEATURES_REQUIRED += periph_gpio periph_i2c

CFLAGS += -DTEST_OUTPUT=$(TEST_OUTPUT)
CFLAGS += -DTEST_SPI=$(TEST_SPI)
CFLAGS += -DTEST_I2C=$(TEST_I2C)
CFLAGS += -DTEST_ADDR=$(TEST_ADDR)
CFLAGS += -DTEST_PIN_CS=$(TEST_PIN_CS)
CFLAGS += -DTEST_PIN_DC=$(TEST_PIN_DC)
CFLAGS += -DTEST_PIN_RESET=$(TEST_PIN_RESET)
CFLAGS += -DTEST_DISPLAY=$(TEST_DISPLAY)



include $(RIOTBASE)/Makefile.include
